<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.0 -->
<title>super | 孙大剩</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="super" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="super 老师留了一项作业，要求在ViewController的 viewDidLoad方法中将 self.view处理一下，使得对象在后续调用 tag的时候将要返回的值打印出来。 于是乎我写出了以下代码完成了作业 @interface MyView : UIView @end @implementation MyView - (NSInteger)tag { &nbsp;&nbsp;&nbsp; NSInteger tag = [super&nbsp;tag]; &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; object_setClass(view, [MyView&nbsp;class]); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 老师看了以后感觉非常满意，跟答案是一模一样啊，我心里是乐开了个花，然后信心满满得给爸爸看。但是爸爸却说，代码里不允许出现 UIView这个类，别问为什么，这是要求，你爹永远是对的！ 怎么办呢？如果不继承的话，就需要对UIView做方法交换，但那样会破坏原有的类系统。如何在目前的实现上做相应的变化呢？ 于是乎，思路如下： 1&nbsp;写一个假类 MyView 继承于 NSObject ，仅用于提供 tag 的 实现； 2 动态注册 UIView子类 _MyView，为其增加 tag方法，并绑定 MyView的实现；&nbsp; 3 将 UIView对象的类修改为 _MyView 代码就变成了这样 @interface MyView : NSObject @end @implementation MyView - (NSInteger)tag { &nbsp;&nbsp;&nbsp; NSInteger tag = [super&nbsp;tag]; &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; Class aClass = view.class; &nbsp;&nbsp;&nbsp; NSString *subclassString = @&quot;_MyView&quot;; &nbsp;&nbsp;&nbsp; Class subclass = objc_allocateClassPair(aClass, subclassString.UTF8String, 0); &nbsp;&nbsp;&nbsp; if (subclass) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class fakeClass = [MyView&nbsp;class]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSArray *selectorStrings = @[@&quot;tag&quot;]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (NSString *selectorString in selectorStrings) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEL selector = NSSelectorFromString(selectorString); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method method = class_getInstanceMethod(fakeClass, selector); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(method, @&quot;Error:class_getInstanceMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BOOL ret = class_addMethod(subclass, selector, method_getImplementation(method), method_getTypeEncoding(method)); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void)ret; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(ret, @&quot;Error:class_addMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; } else { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = NSClassFromString(subclassString); &nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; object_setClass(view, subclass); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 改完了发现连编译都不过，No visible @interface for &#39;NSObject&#39; declares the selector ’tag’。 对，给NSObject加个category，欺骗一下编译器。 @interface NSObject (MyView) - (NSInteger)tag; @end 可以，编译过了。但是运行错误 #0&nbsp;&nbsp;&nbsp;&nbsp;0x0000000187890500 in objc_exception_throw () #1&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e35ef4 in -[NSObject(NSObject) doesNotRecognizeSelector:] () #2&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e32d54 in ___forwarding___ () #3&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188d2ed4c in _CF_forwarding_prep_0 () #4&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000b9ea0 in -[MyView tag] at ViewController.m:26 #5&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000ba484 in -[ViewController viewDidLoad] at ViewController.m:62 -[_MyView tag]: unrecognized selector sent to instance 0x10030e410 Exception断点处调试下看一看 (lldb) po object_getClass((id)0x10030e410) _MyView (lldb) po class_getSuperclass(object_getClass((id)0x10030e410)) UIView 为什么运行时找不到tag方法呢？原因就在于这个super super这个关键字跟 self是完全不一样的，和&nbsp;_cmd一样，self可以被解读成一个隐式参数，可以作为左值、右值，完全一个自动变量，也可以作为一个方法名，被定义在 NSObject协议之下 @protocol NSObject - ( instancetype ) self ; @end 而 super 在rewrite后变成了 static NSInteger _I_MyView_tag(MyView * self, SEL _cmd) { &nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){(id)self, (id)class_getSuperclass(objc_getClass(&quot;MyView&quot;))}, sel_registerName(&quot;tag&quot;)); &nbsp;&nbsp;&nbsp; NSLog((NSString *)&amp;__NSConstantStringImpl__ViewController_m_0, ((NSNumber *(*)(Class, SEL, NSInteger))(void *)objc_msgSend)(objc_getClass(&quot;NSNumber&quot;), sel_registerName(&quot;numberWithInteger:&quot;), (NSInteger)(tag))); &nbsp;&nbsp;&nbsp; return tag; } 代码中&quot;MyView&quot;是编译时就确定了的，所以objc_msgSendSuper所查找的类是MyView的父类NSObject，所以找不到tag方法。 然后我们去掉本不该有的NSObject类别，通过修改super的含义，来解决问题。最终代码 如下： @interface MyView : NSObject @end @implementation MyView - (NSInteger)tag { //&nbsp;&nbsp;&nbsp; NSInteger tag = [super tag]; &nbsp;&nbsp;&nbsp; struct&nbsp;objc_super su = {self, NSClassFromString(@&quot;UIView&quot;)}; &nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(struct&nbsp;objc_super *, SEL))objc_msgSendSuper)(&amp;su, @selector(tag)); &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; Class aClass = view.class; &nbsp;&nbsp;&nbsp; NSString *subclassString = @&quot;_MyView&quot;; &nbsp;&nbsp;&nbsp; Class subclass = objc_allocateClassPair(aClass, subclassString.UTF8String, 0); &nbsp;&nbsp;&nbsp; if (subclass) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class fakeClass = [MyView&nbsp;class]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSArray *selectorStrings = @[@&quot;tag&quot;]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (NSString *selectorString in selectorStrings) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEL selector = NSSelectorFromString(selectorString); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method method = class_getInstanceMethod(fakeClass, selector); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(method, @&quot;Error:class_getInstanceMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BOOL ret = class_addMethod(subclass, selector, method_getImplementation(method), method_getTypeEncoding(method)); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void)ret; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(ret, @&quot;Error:class_addMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; } else { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = NSClassFromString(subclassString); &nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; object_setClass(view, subclass); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 符合了要求，爸爸也就没有再说什么了。这只是个例子，实际开发中场景可能会复杂的多，比如把tag换成frame，比如把UIView换成UIEvent、NSURLSessionTask。有人会问，为什么会有这种特殊的要求？我想说的是，这点不重要，重要的是理解super的含义以及合理运用来解决实际生产中的问题。 [jekyll-docs]: https://jekyllrb.com/docs/home [jekyll-gh]: https://github.com/jekyll/jekyll [jekyll-talk]: https://talk.jekyllrb.com/" />
<meta property="og:description" content="super 老师留了一项作业，要求在ViewController的 viewDidLoad方法中将 self.view处理一下，使得对象在后续调用 tag的时候将要返回的值打印出来。 于是乎我写出了以下代码完成了作业 @interface MyView : UIView @end @implementation MyView - (NSInteger)tag { &nbsp;&nbsp;&nbsp; NSInteger tag = [super&nbsp;tag]; &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; object_setClass(view, [MyView&nbsp;class]); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 老师看了以后感觉非常满意，跟答案是一模一样啊，我心里是乐开了个花，然后信心满满得给爸爸看。但是爸爸却说，代码里不允许出现 UIView这个类，别问为什么，这是要求，你爹永远是对的！ 怎么办呢？如果不继承的话，就需要对UIView做方法交换，但那样会破坏原有的类系统。如何在目前的实现上做相应的变化呢？ 于是乎，思路如下： 1&nbsp;写一个假类 MyView 继承于 NSObject ，仅用于提供 tag 的 实现； 2 动态注册 UIView子类 _MyView，为其增加 tag方法，并绑定 MyView的实现；&nbsp; 3 将 UIView对象的类修改为 _MyView 代码就变成了这样 @interface MyView : NSObject @end @implementation MyView - (NSInteger)tag { &nbsp;&nbsp;&nbsp; NSInteger tag = [super&nbsp;tag]; &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; Class aClass = view.class; &nbsp;&nbsp;&nbsp; NSString *subclassString = @&quot;_MyView&quot;; &nbsp;&nbsp;&nbsp; Class subclass = objc_allocateClassPair(aClass, subclassString.UTF8String, 0); &nbsp;&nbsp;&nbsp; if (subclass) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class fakeClass = [MyView&nbsp;class]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSArray *selectorStrings = @[@&quot;tag&quot;]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (NSString *selectorString in selectorStrings) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEL selector = NSSelectorFromString(selectorString); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method method = class_getInstanceMethod(fakeClass, selector); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(method, @&quot;Error:class_getInstanceMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BOOL ret = class_addMethod(subclass, selector, method_getImplementation(method), method_getTypeEncoding(method)); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void)ret; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(ret, @&quot;Error:class_addMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; } else { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = NSClassFromString(subclassString); &nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; object_setClass(view, subclass); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 改完了发现连编译都不过，No visible @interface for &#39;NSObject&#39; declares the selector ’tag’。 对，给NSObject加个category，欺骗一下编译器。 @interface NSObject (MyView) - (NSInteger)tag; @end 可以，编译过了。但是运行错误 #0&nbsp;&nbsp;&nbsp;&nbsp;0x0000000187890500 in objc_exception_throw () #1&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e35ef4 in -[NSObject(NSObject) doesNotRecognizeSelector:] () #2&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e32d54 in ___forwarding___ () #3&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188d2ed4c in _CF_forwarding_prep_0 () #4&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000b9ea0 in -[MyView tag] at ViewController.m:26 #5&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000ba484 in -[ViewController viewDidLoad] at ViewController.m:62 -[_MyView tag]: unrecognized selector sent to instance 0x10030e410 Exception断点处调试下看一看 (lldb) po object_getClass((id)0x10030e410) _MyView (lldb) po class_getSuperclass(object_getClass((id)0x10030e410)) UIView 为什么运行时找不到tag方法呢？原因就在于这个super super这个关键字跟 self是完全不一样的，和&nbsp;_cmd一样，self可以被解读成一个隐式参数，可以作为左值、右值，完全一个自动变量，也可以作为一个方法名，被定义在 NSObject协议之下 @protocol NSObject - ( instancetype ) self ; @end 而 super 在rewrite后变成了 static NSInteger _I_MyView_tag(MyView * self, SEL _cmd) { &nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){(id)self, (id)class_getSuperclass(objc_getClass(&quot;MyView&quot;))}, sel_registerName(&quot;tag&quot;)); &nbsp;&nbsp;&nbsp; NSLog((NSString *)&amp;__NSConstantStringImpl__ViewController_m_0, ((NSNumber *(*)(Class, SEL, NSInteger))(void *)objc_msgSend)(objc_getClass(&quot;NSNumber&quot;), sel_registerName(&quot;numberWithInteger:&quot;), (NSInteger)(tag))); &nbsp;&nbsp;&nbsp; return tag; } 代码中&quot;MyView&quot;是编译时就确定了的，所以objc_msgSendSuper所查找的类是MyView的父类NSObject，所以找不到tag方法。 然后我们去掉本不该有的NSObject类别，通过修改super的含义，来解决问题。最终代码 如下： @interface MyView : NSObject @end @implementation MyView - (NSInteger)tag { //&nbsp;&nbsp;&nbsp; NSInteger tag = [super tag]; &nbsp;&nbsp;&nbsp; struct&nbsp;objc_super su = {self, NSClassFromString(@&quot;UIView&quot;)}; &nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(struct&nbsp;objc_super *, SEL))objc_msgSendSuper)(&amp;su, @selector(tag)); &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; Class aClass = view.class; &nbsp;&nbsp;&nbsp; NSString *subclassString = @&quot;_MyView&quot;; &nbsp;&nbsp;&nbsp; Class subclass = objc_allocateClassPair(aClass, subclassString.UTF8String, 0); &nbsp;&nbsp;&nbsp; if (subclass) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class fakeClass = [MyView&nbsp;class]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSArray *selectorStrings = @[@&quot;tag&quot;]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (NSString *selectorString in selectorStrings) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEL selector = NSSelectorFromString(selectorString); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method method = class_getInstanceMethod(fakeClass, selector); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(method, @&quot;Error:class_getInstanceMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BOOL ret = class_addMethod(subclass, selector, method_getImplementation(method), method_getTypeEncoding(method)); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void)ret; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(ret, @&quot;Error:class_addMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; } else { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = NSClassFromString(subclassString); &nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; object_setClass(view, subclass); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 符合了要求，爸爸也就没有再说什么了。这只是个例子，实际开发中场景可能会复杂的多，比如把tag换成frame，比如把UIView换成UIEvent、NSURLSessionTask。有人会问，为什么会有这种特殊的要求？我想说的是，这点不重要，重要的是理解super的含义以及合理运用来解决实际生产中的问题。 [jekyll-docs]: https://jekyllrb.com/docs/home [jekyll-gh]: https://github.com/jekyll/jekyll [jekyll-talk]: https://talk.jekyllrb.com/" />
<link rel="canonical" href="http://localhost:4000/jekyll/update/2018/08/23/super.html" />
<meta property="og:url" content="http://localhost:4000/jekyll/update/2018/08/23/super.html" />
<meta property="og:site_name" content="孙大剩" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-23T20:07:52+08:00" />
<script type="application/ld+json">
{"description":"super 老师留了一项作业，要求在ViewController的 viewDidLoad方法中将 self.view处理一下，使得对象在后续调用 tag的时候将要返回的值打印出来。 于是乎我写出了以下代码完成了作业 @interface MyView : UIView @end @implementation MyView - (NSInteger)tag { &nbsp;&nbsp;&nbsp; NSInteger tag = [super&nbsp;tag]; &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; object_setClass(view, [MyView&nbsp;class]); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 老师看了以后感觉非常满意，跟答案是一模一样啊，我心里是乐开了个花，然后信心满满得给爸爸看。但是爸爸却说，代码里不允许出现 UIView这个类，别问为什么，这是要求，你爹永远是对的！ 怎么办呢？如果不继承的话，就需要对UIView做方法交换，但那样会破坏原有的类系统。如何在目前的实现上做相应的变化呢？ 于是乎，思路如下： 1&nbsp;写一个假类 MyView 继承于 NSObject ，仅用于提供 tag 的 实现； 2 动态注册 UIView子类 _MyView，为其增加 tag方法，并绑定 MyView的实现；&nbsp; 3 将 UIView对象的类修改为 _MyView 代码就变成了这样 @interface MyView : NSObject @end @implementation MyView - (NSInteger)tag { &nbsp;&nbsp;&nbsp; NSInteger tag = [super&nbsp;tag]; &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; Class aClass = view.class; &nbsp;&nbsp;&nbsp; NSString *subclassString = @&quot;_MyView&quot;; &nbsp;&nbsp;&nbsp; Class subclass = objc_allocateClassPair(aClass, subclassString.UTF8String, 0); &nbsp;&nbsp;&nbsp; if (subclass) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class fakeClass = [MyView&nbsp;class]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSArray *selectorStrings = @[@&quot;tag&quot;]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (NSString *selectorString in selectorStrings) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEL selector = NSSelectorFromString(selectorString); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method method = class_getInstanceMethod(fakeClass, selector); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(method, @&quot;Error:class_getInstanceMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BOOL ret = class_addMethod(subclass, selector, method_getImplementation(method), method_getTypeEncoding(method)); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void)ret; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(ret, @&quot;Error:class_addMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; } else { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = NSClassFromString(subclassString); &nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; object_setClass(view, subclass); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 改完了发现连编译都不过，No visible @interface for &#39;NSObject&#39; declares the selector ’tag’。 对，给NSObject加个category，欺骗一下编译器。 @interface NSObject (MyView) - (NSInteger)tag; @end 可以，编译过了。但是运行错误 #0&nbsp;&nbsp;&nbsp;&nbsp;0x0000000187890500 in objc_exception_throw () #1&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e35ef4 in -[NSObject(NSObject) doesNotRecognizeSelector:] () #2&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e32d54 in ___forwarding___ () #3&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188d2ed4c in _CF_forwarding_prep_0 () #4&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000b9ea0 in -[MyView tag] at ViewController.m:26 #5&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000ba484 in -[ViewController viewDidLoad] at ViewController.m:62 -[_MyView tag]: unrecognized selector sent to instance 0x10030e410 Exception断点处调试下看一看 (lldb) po object_getClass((id)0x10030e410) _MyView (lldb) po class_getSuperclass(object_getClass((id)0x10030e410)) UIView 为什么运行时找不到tag方法呢？原因就在于这个super super这个关键字跟 self是完全不一样的，和&nbsp;_cmd一样，self可以被解读成一个隐式参数，可以作为左值、右值，完全一个自动变量，也可以作为一个方法名，被定义在 NSObject协议之下 @protocol NSObject - ( instancetype ) self ; @end 而 super 在rewrite后变成了 static NSInteger _I_MyView_tag(MyView * self, SEL _cmd) { &nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){(id)self, (id)class_getSuperclass(objc_getClass(&quot;MyView&quot;))}, sel_registerName(&quot;tag&quot;)); &nbsp;&nbsp;&nbsp; NSLog((NSString *)&amp;__NSConstantStringImpl__ViewController_m_0, ((NSNumber *(*)(Class, SEL, NSInteger))(void *)objc_msgSend)(objc_getClass(&quot;NSNumber&quot;), sel_registerName(&quot;numberWithInteger:&quot;), (NSInteger)(tag))); &nbsp;&nbsp;&nbsp; return tag; } 代码中&quot;MyView&quot;是编译时就确定了的，所以objc_msgSendSuper所查找的类是MyView的父类NSObject，所以找不到tag方法。 然后我们去掉本不该有的NSObject类别，通过修改super的含义，来解决问题。最终代码 如下： @interface MyView : NSObject @end @implementation MyView - (NSInteger)tag { //&nbsp;&nbsp;&nbsp; NSInteger tag = [super tag]; &nbsp;&nbsp;&nbsp; struct&nbsp;objc_super su = {self, NSClassFromString(@&quot;UIView&quot;)}; &nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(struct&nbsp;objc_super *, SEL))objc_msgSendSuper)(&amp;su, @selector(tag)); &nbsp;&nbsp;&nbsp; NSLog(@&quot;%@&quot;, @(tag)); &nbsp;&nbsp;&nbsp; return tag; } @end @interface&nbsp;ViewController () @end @implementation ViewController - (void)viewDidLoad { &nbsp;&nbsp;&nbsp; [super&nbsp;viewDidLoad]; &nbsp;&nbsp;&nbsp; UIView *view = self.view; &nbsp;&nbsp;&nbsp; Class aClass = view.class; &nbsp;&nbsp;&nbsp; NSString *subclassString = @&quot;_MyView&quot;; &nbsp;&nbsp;&nbsp; Class subclass = objc_allocateClassPair(aClass, subclassString.UTF8String, 0); &nbsp;&nbsp;&nbsp; if (subclass) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class fakeClass = [MyView&nbsp;class]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSArray *selectorStrings = @[@&quot;tag&quot;]; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (NSString *selectorString in selectorStrings) { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SEL selector = NSSelectorFromString(selectorString); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Method method = class_getInstanceMethod(fakeClass, selector); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(method, @&quot;Error:class_getInstanceMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BOOL ret = class_addMethod(subclass, selector, method_getImplementation(method), method_getTypeEncoding(method)); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (void)ret; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NSAssert(ret, @&quot;Error:class_addMethod&quot;); &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; } else { &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = NSClassFromString(subclassString); &nbsp;&nbsp;&nbsp; } &nbsp;&nbsp;&nbsp; object_setClass(view, subclass); &nbsp;&nbsp;&nbsp; (void)view.tag; } @end 符合了要求，爸爸也就没有再说什么了。这只是个例子，实际开发中场景可能会复杂的多，比如把tag换成frame，比如把UIView换成UIEvent、NSURLSessionTask。有人会问，为什么会有这种特殊的要求？我想说的是，这点不重要，重要的是理解super的含义以及合理运用来解决实际生产中的问题。 [jekyll-docs]: https://jekyllrb.com/docs/home [jekyll-gh]: https://github.com/jekyll/jekyll [jekyll-talk]: https://talk.jekyllrb.com/","@type":"BlogPosting","url":"http://localhost:4000/jekyll/update/2018/08/23/super.html","headline":"super","dateModified":"2018-08-23T20:07:52+08:00","datePublished":"2018-08-23T20:07:52+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/jekyll/update/2018/08/23/super.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="孙大剩" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">孙大剩</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">super</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-08-23T20:07:52+08:00" itemprop="datePublished">Aug 23, 2018
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div class="post-content e-content" itemprop="articleBody">
    
 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>super</title>
 
 
  <div>
   老师留了一项作业，要求在ViewController的
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">viewDidLoad</span>方法中将
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">self.view</span>处理一下，使得对象在后续调用
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span>的时候将要返回的值打印出来。
  </div>
  <div>
   <br />
  </div>
  <div>
   于是乎我写出了以下代码完成了作业
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@interface</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> MyView : </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">UIView</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@implementation</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> MyView</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">- (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSInteger</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)tag {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSInteger</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> tag = [</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">super</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">];</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSLog</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(209, 47, 27); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@"%@"</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">, </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@(</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">return</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> tag;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">}</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@interface</span>&nbsp;<span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">ViewController</span><span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> ()</span></span></span>
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@implementation</span><span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> ViewController</span></span>
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; font-family: Menlo;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">- (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">void</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)viewDidLoad {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; [</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">super</span>&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">viewDidLoad</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">];</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">UIView</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> *view = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">self</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">.</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">view</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">object_setClass</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(view, [</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">MyView</span>&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">class</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">]);</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">void</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)view.</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">}</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   老师看了以后感觉非常满意，跟答案是一模一样啊，我心里是乐开了个花，然后信心满满得给爸爸看。但是爸爸却说，代码里不允许出现
   <span style="font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; line-height: normal;">UIView</span>这个类，别问为什么，这是要求，你爹永远是对的！
  </div>
  <div>
   怎么办呢？如果不继承的话，就需要对UIView做方法交换，但那样会破坏原有的类系统。如何在目前的实现上做相应的变化呢？
  </div>
  <div>
   于是乎，思路如下：
  </div>
  <div>
   1&nbsp;写一个假类
   <span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: Menlo; font-size: 12px;">MyView</span>
   <span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">继承于 </span>
   <span style="font-size: 12px; color: rgb(112, 61, 170); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: Menlo; font-style: normal; font-weight: normal;">NSObject</span>
   <span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">，仅用于提供</span>
   <span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: Menlo;">tag</span>
   <span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">的</span>
   <span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">实现；</span>
  </div>
  <div>
   2 动态注册
   <span style="font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">UIView</span>子类
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">_MyView</span>，为其增加
   <span style="font-family: Menlo;">tag</span>方法，并绑定
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">MyView</span>的实现；&nbsp;
  </div>
  <div>
   3 将
   <span style="font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">UIView</span>对象的类修改为
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">_MyView</span>
  </div>
  <div>
   <br />
  </div>
  <div>
   代码就变成了这样
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@interface</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> MyView : </span><span style="font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSObject</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@implementation</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> MyView</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">- (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSInteger</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)tag {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSInteger</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> tag = [</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">super</span>&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(49, 89, 93); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">];</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSLog</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(209, 47, 27); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@"%@"</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">, </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@(</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">return</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> tag;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">}</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@interface</span>&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">ViewController</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> ()</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@implementation</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> ViewController</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">- (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">void</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)viewDidLoad {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; [</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">super</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">viewDidLoad</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">];</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">UIView</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> *view = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">self</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">.</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">view</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Class</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> aClass = view.</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">class</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSString</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> *subclassString = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(209, 47, 27); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@"_MyView"</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Class</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> subclass = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">objc_allocateClassPair</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(aClass, subclassString.</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">UTF8String</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">, </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">0</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">if</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> (subclass) {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Class</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> fakeClass = [</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(79, 129, 135); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">MyView</span>&nbsp;<span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">class</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">];</span></span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSArray</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> *selectorStrings = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@[</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(209, 47, 27); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@"tag"</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(39, 42, 216); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">]</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">for</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSString</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> *selectorString </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">in</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> selectorStrings) {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">SEL</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> selector = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSSelectorFromString</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(selectorString);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Method</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> method = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">class_getInstanceMethod</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(fakeClass, selector);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(120, 73, 42); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSAssert</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(method, </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(209, 47, 27); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@"Error:class_getInstanceMethod"</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">BOOL</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> ret = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">class_addMethod</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(subclass, selector, </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">method_getImplementation</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(method), </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">method_getTypeEncoding</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(method));</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">void</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)ret;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(120, 73, 42); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSAssert</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(ret, </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(209, 47, 27); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@"Error:class_addMethod"</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; } </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">else</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> {</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSClassFromString</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(subclassString);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; }</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; </span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(62, 30, 129); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">object_setClass</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">(view, subclass);</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">&nbsp;&nbsp;&nbsp; (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">void</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)view.</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">tag</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">}</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   改完了发现连编译都不过，No visible @interface for 'NSObject' declares the selector ’tag’。
   <font style="font-size: 14px;"><span style="font-size: 12px;"><span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">对，给</span><span style="font-size: 12px; color: rgb(112, 61, 170); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: Menlo;">NSObject</span><span style="color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">加个category，欺骗一下编译器。</span></span></font>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo;"><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@interface</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> NSObject (MyView)</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">- (</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSInteger</span><span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">)tag;</span></span>
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="background-color: rgb(255, 255, 255); font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@end</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 14px; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-variant-caps: normal; line-height: normal;">可以，编译过了。但是运行错误</span>
  </div>
  <div>
   <br />
  </div>
  <div>
   #0&nbsp;&nbsp;&nbsp;&nbsp;0x0000000187890500 in objc_exception_throw ()
  </div>
  <div>
   #1&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e35ef4 in -[NSObject(NSObject) doesNotRecognizeSelector:] ()
  </div>
  <div>
   #2&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188e32d54 in ___forwarding___ ()
  </div>
  <div>
   #3&nbsp;&nbsp;&nbsp;&nbsp;0x0000000188d2ed4c in _CF_forwarding_prep_0 ()
  </div>
  <div>
   #4&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000b9ea0 in -[MyView tag] at ViewController.m:26
  </div>
  <div>
   #5&nbsp;&nbsp;&nbsp;&nbsp;0x00000001000ba484 in -[ViewController viewDidLoad] at ViewController.m:62
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; font-family: Menlo; font-weight: bold;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;">-[_MyView tag]: unrecognized selector sent to instance 0x10030e410</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <font style="font-size: 14px;"><span style="font-size: 12px;"><span style="font-size: 14px; color: rgb(0, 0, 0); font-stretch: normal; font-variant-caps: normal; line-height: normal; font-family: &quot;Helvetica Neue&quot;;">Exception断点处调试下看一看</span></span></font>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; font-family: Menlo; font-weight: bold;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;">(lldb) po object_getClass((id)0x10030e410)</span></span>
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;">_MyView</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; font-family: Menlo; font-weight: bold;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;">(lldb) po class_getSuperclass(object_getClass((id)0x10030e410))</span></span>
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;">UIView</span></span>
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-variant-ligatures: no-common-ligatures; font-weight: bold; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">为什么运行时找不到tag方法呢？原因就在于这个super</span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-family: &quot;Helvetica Neue&quot;;"><span style="font-size: 12px; font-family: Menlo; color: rgb(186, 45, 162); font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">super</span><span style="font-family: &quot;Helvetica Neue&quot;;">这个关键字跟 </span><span style="font-size: 12px; font-family: Menlo; color: rgb(186, 45, 162); font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">self</span><span style="font-family: &quot;Helvetica Neue&quot;;">是完全不一样的，和</span><span style="font-family: &quot;Helvetica Neue&quot;;">&nbsp;</span><span style="font-size: 12px; font-family: Menlo; color: rgb(186, 45, 162); font-stretch: normal; font-variant-caps: normal; line-height: normal;">_cmd</span><span style="font-family: &quot;Helvetica Neue&quot;;">一样，</span><span style="font-size: 12px; font-family: Menlo; color: rgb(186, 45, 162); font-stretch: normal; font-variant-caps: normal; line-height: normal;">self</span><span style="font-family: &quot;Helvetica Neue&quot;;">可以被解读成一个隐式参数，可以作为左值、右值，完全一个自动变量，也可以作为一个方法名，被定义在 </span><span style="font-size: 12px; font-family: Menlo; color: rgb(0, 0, 0); font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">NSObject</span><span style="font-family: &quot;Helvetica Neue&quot;;">协议之下</span></span>
  </div>
  <div>
   <br />
  </div>
  <div> 
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">@protocol</span>
   <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"> NSObject</span>
  </div>
  <div>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Helvetica; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; font-family: Menlo; font-stretch: normal; line-height: normal;">- (</span>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; line-height: normal;">instancetype</span>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); font-family: Menlo; font-stretch: normal; line-height: normal;">)</span>
   <span style="font-size: 12px; background-color: rgb(255, 255, 255); color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; line-height: normal;">self</span>
   <span style="font-size: 12px; font-family: Menlo; font-stretch: normal; line-height: normal;">;</span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 12px; color: rgb(186, 45, 162); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">@end</span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">而</span>
   <span style="font-size: 12px; font-family: Menlo; color: rgb(186, 45, 162); font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">super</span>
   <span style="font-family: &quot;Helvetica Neue&quot;; font-size: 14px;">在rewrite后变成了</span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div> 
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">static</span>
   <span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> NSInteger _I_MyView_tag(MyView * self, SEL _cmd) {</span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; NSInteger tag = ((NSInteger (*)(__rw_objc_super *, SEL))(</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">void</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);"> *)objc_msgSendSuper)((__rw_objc_super){(id)self, (id)class_getSuperclass(objc_getClass(</span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">"MyView"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">))}, sel_registerName(</span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">"tag"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">));</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; NSLog((NSString *)&amp;__NSConstantStringImpl__ViewController_m_0, ((NSNumber *(*)(Class, SEL, NSInteger))(</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">void</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> *)objc_msgSend)(objc_getClass(</span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">"NSNumber"</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">), sel_registerName(</span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">"numberWithInteger:"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">), (NSInteger)(tag)));</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">return</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> tag;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">}</span></span>
  </div>
  <div>
   <br />
  </div>
  <div>
   <span style="font-size: 14px; font-family: &quot;Helvetica Neue&quot;;">代码中<span style="font-variant-caps: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(209, 47, 27);">"MyView"</span>是编译时就确定了的，所以<span style="font-variant-caps: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">objc_msgSendSuper</span>所查找的类是<span style="font-size: 12px; color: rgb(0, 0, 0); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">MyView</span>的父类<span style="font-size: 12px; color: rgb(112, 61, 170); font-family: Menlo; font-stretch: normal; font-variant-caps: normal; line-height: normal;">NSObject</span>，所以找不到tag方法。</span>
  </div>
  <div>
   <font face="Helvetica Neue">然后我们去掉本不该有的NSObject类别，通过修改super的含义，来解决问题。最终代码</font>
   <span style="font-family: &quot;Helvetica Neue&quot;;">如下：</span>
  </div>
  <div>
   <font face="Helvetica Neue"><br /></font>
  </div>
  <div> 
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@interface</span>
   <span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> MyView : </span>
   <span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSObject</span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@end</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@implementation</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> MyView</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">- (</span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSInteger</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">)tag {</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 132, 0);">//&nbsp;&nbsp;&nbsp; NSInteger tag = [super tag];</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">struct</span>&nbsp;<span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">objc_super</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> su = {</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">self</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">, </span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(62, 30, 129);">NSClassFromString</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">(</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(209, 47, 27);">@"UIView"</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">)};</span></span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSInteger</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> tag = ((</span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSInteger</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> (*)(</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">struct</span>&nbsp;<span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">objc_super</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> *, </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">SEL</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">))</span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">objc_msgSendSuper</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">)(&amp;su, </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">@selector</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(tag));</span></span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">NSLog</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(</span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">@"%@"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">, </span><span style="font: 12.0px Menlo; color: #272ad8; background-color: #ffffff;">@(</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">tag</span><span style="font: 12.0px Menlo; color: #272ad8; background-color: #ffffff;">)</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">return</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> tag;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">}</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@end</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@interface</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;<span style="font: 12.0px Menlo; color: #4f8187; background-color: #ffffff;">ViewController</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> ()</span></span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@end</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@implementation</span><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);"> ViewController</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">- (</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">void</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">)viewDidLoad {</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; [</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">super</span>&nbsp;<span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">viewDidLoad</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">];</span></span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">UIView</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> *view = </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">self</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">.</span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">view</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #4f8187; background-color: #ffffff;">Class</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> aClass = view.</span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">class</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSString</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> *subclassString = </span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">@"_MyView"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #4f8187; background-color: #ffffff;">Class</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> subclass = </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">objc_allocateClassPair</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(aClass, subclassString.</span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">UTF8String</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">, </span><span style="font: 12.0px Menlo; color: #272ad8; background-color: #ffffff;">0</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">if</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> (subclass) {</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #4f8187; background-color: #ffffff;">Class</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> fakeClass = [</span><span style="font: 12.0px Menlo; color: #4f8187; background-color: #ffffff;">MyView</span>&nbsp;<span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">class</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">];</span></span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSArray</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> *selectorStrings = </span><span style="font: 12.0px Menlo; color: #272ad8; background-color: #ffffff;">@[</span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">@"tag"</span><span style="font: 12.0px Menlo; color: #272ad8; background-color: #ffffff;">]</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">for</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> (</span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">NSString</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> *selectorString </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">in</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> selectorStrings) {</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">SEL</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> selector = </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">NSSelectorFromString</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(selectorString);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">Method</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> method = </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">class_getInstanceMethod</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(fakeClass, selector);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #78492a; background-color: #ffffff;">NSAssert</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(method, </span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">@"Error:class_getInstanceMethod"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">BOOL</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> ret = </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">class_addMethod</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(subclass, selector, </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">method_getImplementation</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(method), </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">method_getTypeEncoding</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(method));</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">void</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">)ret;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #78492a; background-color: #ffffff;">NSAssert</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(ret, </span><span style="font: 12.0px Menlo; color: #d12f1b; background-color: #ffffff;">@"Error:class_addMethod"</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; } </span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">else</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;"> {</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subclass = </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">NSClassFromString</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(subclassString);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; }</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; </span><span style="font: 12.0px Menlo; color: #3e1e81; background-color: #ffffff;">object_setClass</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">(view, subclass);</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">&nbsp;&nbsp;&nbsp; (</span><span style="font: 12.0px Menlo; color: #ba2da2; background-color: #ffffff;">void</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">)view.</span><span style="font: 12.0px Menlo; color: #703daa; background-color: #ffffff;">tag</span><span style="font: 12.0px Menlo; color: #000000; background-color: #ffffff;">;</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(0, 0, 0);">}</span></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"></span>
  </div>
  <div>
   <span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);"><br /></span>
  </div>
  <div>
   <span style="font: 12.0px Helvetica; background-color: #ffffff;"><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; font-stretch: normal; font-size: 12px; line-height: normal; font-family: Menlo; color: rgb(186, 45, 162);">@end</span></span>
  </div>
  <div>
   <span style="font-size: 14px; font-family: &quot;Helvetica Neue&quot;;"><span style="font-size: 14px; font-family: &quot;Helvetica Neue&quot;;"><br /></span></span>
  </div>
  <div>
   符合了要求，爸爸也就没有再说什么了。这只是个例子，实际开发中场景可能会复杂的多，比如把tag换成frame，比如把UIView换成UIEvent、NSURLSessionTask。有人会问，为什么会有这种特殊的要求？我想说的是，这点不重要，重要的是理解super的含义以及合理运用来解决实际生产中的问题。
  </div>
 


  </div>


  </div><a class="u-url" href="/jekyll/update/2018/08/23/super.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">孙大剩</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">孙大剩</li><li><a class="u-email" href="mailto:250764090@qq.com">250764090@qq.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/iOS-Developer-Sun"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">iOS-Developer-Sun</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>An iOS developer since 2012.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
